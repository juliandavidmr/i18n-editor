<app-sidenav>
  <div class="editor-component">

    <div class="editor-component_header">
      <div class="editor-component_header__left">
        <button type="button" mat-raised-button (click)="imgFileInput.click()">Add a resources</button>
        <input hidden type="file" #imgFileInput (change)="readMultiFiles($event)" multiple />
        &nbsp;&nbsp;
        <button (click)="save()" mat-raised-button [disabled]="!rw.hasFiles">Download</button>
      </div>
      <div class="editor-component_header__right">
        <div *ngIf="rw.hasFiles">
          <span class="tag tag-default">{{ rw.fileList.length }} files</span>
          <span class="tag tag-default">{{ rw.categoryList.length }} resources</span>
        </div>
      </div>
    </div>
    <div class="editor-component_body">
      <div class="empty-content" *ngIf="!rw.hasFiles">
        <img src="assets/img/empty-trash.png" />
        <br/>
        <span>No resources have been added</span>
      </div>
      <mat-drawer-container class="editor-container" *ngIf="rw.hasFiles" autosize>
        <mat-drawer #drawer class="editor-sidenav" toggle mode="side">
          <!-- <p><b>Resources list</b></p> -->
          <div class="editor-sidenav_header" toggle>
            <mat-form-field>
              <input matInput [placeholder]="'Add new key'" [(ngModel)]="modelNewKey" />
            </mat-form-field>
            <!-- <mat-form-field appearance="outline">
              <mat-label>Add new key</mat-label>
              <input matInput placeholder="Placeholder">
            </mat-form-field> -->
            &nbsp;<button mat-raised-button (click)="addNewKey()">Add</button>
          </div>
          <div class="editor-sidenav_content">
            <mat-selection-list #resources>
              <mat-list-option *ngFor="let c of rw.categoryList; trackBy: trackCategoryByKey; let i = index;">
                {{ i + 1 }}. {{c.keyName}}
              </mat-list-option>
            </mat-selection-list>
          </div>
        </mat-drawer>

        <div class="editor-sidenav-content">
          <div class="editor-sidenav-content_header">
            <button type="button" mat-button (click)="drawer.toggle()">
              Toggle sidenav
            </button>
            <br />
          </div>
          <div class="editor-sidenav-content_body">
            <mat-accordion>
              <ng-container *ngFor="let c of rw.categoryList; trackBy: trackCategoryByKey; let i = index;">
                <mat-expansion-panel hideToggle="true">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      <span>#{{ i + 1 }}. {{ c.keyName }}</span>
                    </mat-panel-title>
                    <mat-panel-description>
                      <span>{{ c.languages.length }} elements</span>
                    </mat-panel-description>
                  </mat-expansion-panel-header>
                  <ng-template matExpansionPanelContent>
                    <ng-container *ngFor="let transl of c.languages; trackBy: trackResourceByKey">
                      <div class="editor-component_input">
                        <label>{{ transl.lang }}</label>
                        <input [placeholder]="transl.lang" [(ngModel)]="transl.text" />
                      </div>
                      <div *ngIf="states[i].inner" class="editor-component_states--inner">
                        <div [innerHTML]="transl.text"></div>
                      </div>
                    </ng-container>

                    <div *ngIf="states.length > 0" class="editor-component_footer">
                      <mat-form-field matLine>
                        <input matInput [placeholder]="'Enter filename for new language'"
                          [(ngModel)]="modelNewLanguage" />
                      </mat-form-field>
                      <button mat-button (click)="addLanguage(false, c.keyName)">Add only to this resource</button>
                      <button mat-button (click)="addLanguage(true, c.keyName)">Add to all resources</button>
                      <div>
                        <button mat-button [matMenuTriggerFor]="animals">Options</button>
                        <mat-menu #animals="matMenu">
                          <button mat-menu-item [matMenuTriggerFor]="render">Render</button>
                          <button mat-menu-item [matMenuTriggerFor]="format">Format</button>
                          <button mat-menu-item (click)="rw.removeResourceKey(c.keyName)">Remove this key</button>
                        </mat-menu>
                        <mat-menu #render="matMenu">
                          <button mat-menu-item>
                            <mat-checkbox (change)="onChangeInner($event, i)"
                              title="Render HTML content in each translation">
                              Render
                            </mat-checkbox>
                          </button>
                        </mat-menu>
                        <mat-menu #format="matMenu">
                          <button mat-menu-item (click)="copyFormat('ngx-translate', c.keyName)">ngx-translate
                            format</button>
                        </mat-menu>
                      </div>
                    </div>
                  </ng-template>
                </mat-expansion-panel>
              </ng-container>
            </mat-accordion>
          </div>
        </div>
      </mat-drawer-container>
      <!-- <div class="editor-component_body__sidemenu">
        <div class="editor-component_body__sidemenu___header" *ngIf="rw.hasFiles">
          <mat-form-field>
            <input matInput [placeholder]="'Add new translation key'" [(ngModel)]="modelNewKey" />
          </mat-form-field>
          &nbsp;&nbsp;<button mat-raised-button (click)="addNewKey()">Add</button>
        </div>
        <div class="editor-component_body__sidemenu___content">
          <mat-selection-list #resources>
            <mat-list-option *ngFor="let c of rw.categoryList; trackBy: trackCategoryByKey; let i = index;">
              {{ i + 1 }}. {{c.keyName}}
            </mat-list-option>
          </mat-selection-list>
        </div>
      </div>
      <div class="editor-component_body__content">
        <mat-accordion>
          <ng-container *ngFor="let c of rw.categoryList; trackBy: trackCategoryByKey; let i = index;">
            <mat-expansion-panel hideToggle="true">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  <span>#{{ i + 1 }}. {{ c.keyName }}</span>
                </mat-panel-title>
                <mat-panel-description>
                  <span>{{ c.languages.length }} elements</span>
                </mat-panel-description>
              </mat-expansion-panel-header>
              <ng-template matExpansionPanelContent>
                <ng-container *ngFor="let transl of c.languages; trackBy: trackResourceByKey">
                  <div class="editor-component_input">
                    <label>{{ transl.lang }}</label>
                    <input [placeholder]="transl.lang" [(ngModel)]="transl.text" />
                  </div>
                  <div *ngIf="states[i].inner" class="editor-component_states--inner">
                    <div [innerHTML]="transl.text"></div>
                  </div>
                </ng-container>

                <div *ngIf="states.length > 0" class="editor-component_footer">
                  <mat-form-field matLine>
                    <input matInput [placeholder]="'Enter filename for new language'" [(ngModel)]="modelNewLanguage" />
                  </mat-form-field>
                  <button mat-button (click)="addLanguage(false, c.keyName)">Add only to this resource</button>
                  <button mat-button (click)="addLanguage(true, c.keyName)">Add to all resources</button>
                  <div>
                    <button mat-button [matMenuTriggerFor]="animals">Options</button>
                    <mat-menu #animals="matMenu">
                      <button mat-menu-item [matMenuTriggerFor]="render">Render</button>
                      <button mat-menu-item [matMenuTriggerFor]="format">Format</button>
                      <button mat-menu-item (click)="rw.removeResourceKey(c.keyName)">Remove this key</button>
                    </mat-menu>
                    <mat-menu #render="matMenu">
                      <button mat-menu-item>
                        <mat-checkbox (change)="onChangeInner($event, i)"
                          title="Render HTML content in each translation">
                          Render
                        </mat-checkbox>
                      </button>
                    </mat-menu>
                    <mat-menu #format="matMenu">
                      <button mat-menu-item (click)="copyFormat('ngx-translate', c.keyName)">ngx-translate
                        format</button>
                    </mat-menu>
                  </div>
                </div>
              </ng-template>
            </mat-expansion-panel>
          </ng-container>
        </mat-accordion>
      </div> -->
    </div>
  </div>
</app-sidenav>